<html>
<head>
	 <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>
<body>
	<script type="text/javascript">
	(function($) {
		// Get parameters from actual URL
		function getURLParameter(name) {
			return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null;
		}

		// Set the arguments for the API
		var arguments	= { 
			public_key 	: "API_PUBLIC_KEY",
			username 	: "testuser",
			email 		: "test@example.com",
			gender 		: "1",
			password 	: "123456"
		};

		// Detect if there is imocash param
		var imocash 	= getURLParameter('pcid');
		if (imocash) {
			arguments['pcid'] = imocash;
		}

		// Detect if there is cake param
		var cake 		= getURLParameter('req');
		if (cake) {
			arguments['req'] = cake;
		}

		$.getJSON( "http://fun-flirt.com/api/signup?callback=?", arguments)
			.done(function( json ) {
				console.log( "JSON Data: " + json.message );
			})
			.fail(function( jqXHR, textStatus, error ) {
				console.log( "Request Failed: " + textStatus + ", " + error );
				console.log( "Error Object ", jqXHR.responseJSON);

				// Get each error
				for (var key in jqXHR.responseJSON.errors) {
				   var obj = jqXHR.responseJSON.errors[key];
				   for (var error in obj) {
				      console.log(error + " = " + obj[error]);
				   }
				}
			}
		);
	})(jQuery);
	</script>
</body>
</html>